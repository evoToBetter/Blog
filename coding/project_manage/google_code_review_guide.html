<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>谷歌代码评审指南学习 | evoToBetter</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="Share For Fun">
    <link rel="preload" href="/Blog/assets/css/0.styles.c6d0faec.css" as="style"><link rel="preload" href="/Blog/assets/js/app.06c93059.js" as="script"><link rel="preload" href="/Blog/assets/js/3.cf0bfed9.js" as="script"><link rel="preload" href="/Blog/assets/js/1.caa12b57.js" as="script"><link rel="preload" href="/Blog/assets/js/43.8f002953.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.cefbe417.js"><link rel="prefetch" href="/Blog/assets/js/11.1c087184.js"><link rel="prefetch" href="/Blog/assets/js/12.e85c0ce1.js"><link rel="prefetch" href="/Blog/assets/js/13.fb276eaf.js"><link rel="prefetch" href="/Blog/assets/js/14.c81c3a49.js"><link rel="prefetch" href="/Blog/assets/js/15.73fe1f6a.js"><link rel="prefetch" href="/Blog/assets/js/16.e4c2a50a.js"><link rel="prefetch" href="/Blog/assets/js/17.102e0306.js"><link rel="prefetch" href="/Blog/assets/js/18.032a39e1.js"><link rel="prefetch" href="/Blog/assets/js/19.1b106adc.js"><link rel="prefetch" href="/Blog/assets/js/20.5835f6bf.js"><link rel="prefetch" href="/Blog/assets/js/21.b9d24162.js"><link rel="prefetch" href="/Blog/assets/js/22.a3929450.js"><link rel="prefetch" href="/Blog/assets/js/23.b0a21672.js"><link rel="prefetch" href="/Blog/assets/js/24.d6fde27a.js"><link rel="prefetch" href="/Blog/assets/js/25.b4f16534.js"><link rel="prefetch" href="/Blog/assets/js/26.3d925c49.js"><link rel="prefetch" href="/Blog/assets/js/27.3771590c.js"><link rel="prefetch" href="/Blog/assets/js/28.69c46881.js"><link rel="prefetch" href="/Blog/assets/js/29.503cd9e6.js"><link rel="prefetch" href="/Blog/assets/js/30.d845a39d.js"><link rel="prefetch" href="/Blog/assets/js/31.dabe1bab.js"><link rel="prefetch" href="/Blog/assets/js/32.80aab3af.js"><link rel="prefetch" href="/Blog/assets/js/33.7967fb14.js"><link rel="prefetch" href="/Blog/assets/js/34.98a86112.js"><link rel="prefetch" href="/Blog/assets/js/35.75b1b298.js"><link rel="prefetch" href="/Blog/assets/js/36.cfe0343f.js"><link rel="prefetch" href="/Blog/assets/js/37.910d5404.js"><link rel="prefetch" href="/Blog/assets/js/38.d5d6453c.js"><link rel="prefetch" href="/Blog/assets/js/39.7f6b76ec.js"><link rel="prefetch" href="/Blog/assets/js/4.0202e1a4.js"><link rel="prefetch" href="/Blog/assets/js/40.e34dd07e.js"><link rel="prefetch" href="/Blog/assets/js/41.3d677445.js"><link rel="prefetch" href="/Blog/assets/js/42.851ca2cb.js"><link rel="prefetch" href="/Blog/assets/js/44.657ac2cd.js"><link rel="prefetch" href="/Blog/assets/js/45.fc3b02d9.js"><link rel="prefetch" href="/Blog/assets/js/46.2085ad42.js"><link rel="prefetch" href="/Blog/assets/js/47.b9f66877.js"><link rel="prefetch" href="/Blog/assets/js/48.bdae7d70.js"><link rel="prefetch" href="/Blog/assets/js/49.0011ee10.js"><link rel="prefetch" href="/Blog/assets/js/5.5ee5af7d.js"><link rel="prefetch" href="/Blog/assets/js/50.5a708708.js"><link rel="prefetch" href="/Blog/assets/js/51.c17f376e.js"><link rel="prefetch" href="/Blog/assets/js/52.bf274107.js"><link rel="prefetch" href="/Blog/assets/js/53.0cd5dfa5.js"><link rel="prefetch" href="/Blog/assets/js/54.8673c763.js"><link rel="prefetch" href="/Blog/assets/js/55.f25f0710.js"><link rel="prefetch" href="/Blog/assets/js/56.1542a39a.js"><link rel="prefetch" href="/Blog/assets/js/57.c6012595.js"><link rel="prefetch" href="/Blog/assets/js/58.4ff26a0e.js"><link rel="prefetch" href="/Blog/assets/js/59.40eb21b4.js"><link rel="prefetch" href="/Blog/assets/js/6.d608f019.js"><link rel="prefetch" href="/Blog/assets/js/60.c6da0d97.js"><link rel="prefetch" href="/Blog/assets/js/61.12ceafd1.js"><link rel="prefetch" href="/Blog/assets/js/62.818392e8.js"><link rel="prefetch" href="/Blog/assets/js/63.a807cc3c.js"><link rel="prefetch" href="/Blog/assets/js/64.99472410.js"><link rel="prefetch" href="/Blog/assets/js/65.88f5f047.js"><link rel="prefetch" href="/Blog/assets/js/66.21596e55.js"><link rel="prefetch" href="/Blog/assets/js/67.701bf769.js"><link rel="prefetch" href="/Blog/assets/js/68.f069a295.js"><link rel="prefetch" href="/Blog/assets/js/7.49059aa9.js"><link rel="prefetch" href="/Blog/assets/js/8.c97e8683.js"><link rel="prefetch" href="/Blog/assets/js/9.389a4622.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.c6d0faec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>evoToBetter</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>evoToBetter</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">evoToBetter</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/categories/algorithm/" class="nav-link"><i class="iconfont undefined"></i>
  algorithm
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/design/" class="nav-link"><i class="iconfont undefined"></i>
  design
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/database/" class="nav-link"><i class="iconfont undefined"></i>
  database
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/elastic stack/" class="nav-link"><i class="iconfont undefined"></i>
  elastic stack
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/design pattern/" class="nav-link"><i class="iconfont undefined"></i>
  design pattern
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/nodejs/" class="nav-link"><i class="iconfont undefined"></i>
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/blog/" class="nav-link"><i class="iconfont undefined"></i>
  blog
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/golang/" class="nav-link"><i class="iconfont undefined"></i>
  golang
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/go/" class="nav-link"><i class="iconfont undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/project manage/" class="nav-link"><i class="iconfont undefined"></i>
  project manage
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/python/" class="nav-link"><i class="iconfont undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/jenkins/" class="nav-link"><i class="iconfont undefined"></i>
  jenkins
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/k8s/" class="nav-link"><i class="iconfont undefined"></i>
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/devOps/" class="nav-link"><i class="iconfont undefined"></i>
  devOps
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/distributed_system/" class="nav-link"><i class="iconfont undefined"></i>
  distributed_system
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/cloud/" class="nav-link"><i class="iconfont undefined"></i>
  cloud
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/Blog/hiker.jpg" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    evoToBetter
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>32</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>50</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/Blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/categories/algorithm/" class="nav-link"><i class="iconfont undefined"></i>
  algorithm
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/design/" class="nav-link"><i class="iconfont undefined"></i>
  design
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/database/" class="nav-link"><i class="iconfont undefined"></i>
  database
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/elastic stack/" class="nav-link"><i class="iconfont undefined"></i>
  elastic stack
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/design pattern/" class="nav-link"><i class="iconfont undefined"></i>
  design pattern
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/nodejs/" class="nav-link"><i class="iconfont undefined"></i>
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/blog/" class="nav-link"><i class="iconfont undefined"></i>
  blog
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/golang/" class="nav-link"><i class="iconfont undefined"></i>
  golang
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/go/" class="nav-link"><i class="iconfont undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/project manage/" class="nav-link"><i class="iconfont undefined"></i>
  project manage
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/python/" class="nav-link"><i class="iconfont undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/jenkins/" class="nav-link"><i class="iconfont undefined"></i>
  jenkins
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/k8s/" class="nav-link"><i class="iconfont undefined"></i>
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/devOps/" class="nav-link"><i class="iconfont undefined"></i>
  devOps
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/distributed_system/" class="nav-link"><i class="iconfont undefined"></i>
  distributed_system
</a></li><li class="dropdown-item"><!----> <a href="/Blog/categories/cloud/" class="nav-link"><i class="iconfont undefined"></i>
  cloud
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>谷歌代码评审指南学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/coding/project_manage/google_code_review_guide.html#代码评审人指南-code-reviewer-guide" class="sidebar-link">代码评审人指南 code reviewer guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_1-代码评审的标准-the-standard-of-code-review" class="sidebar-link">1. 代码评审的标准 The standard of code review</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_2-代码评审中需要关注的点-what-to-look-for-in-a-code-review" class="sidebar-link">2. 代码评审中需要关注的点 What to look for in a code review</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_3-浏览cl-navigating-a-cl-in-review" class="sidebar-link">3. 浏览CL Navigating a CL in review</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_4-code-review的速度-speed-of-code-reviews" class="sidebar-link">4. code review的速度 Speed of Code Reviews</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_5-如何写code-review评论" class="sidebar-link">5. 如何写code review评论</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_6-处理code-review中的拒绝" class="sidebar-link">6. 处理code review中的拒绝</a></li></ul></li><li><a href="/Blog/coding/project_manage/google_code_review_guide.html#改动作者指南-the-cl-author-s-guide-to-getting-through-code-review" class="sidebar-link">改动作者指南 The CL author’s guide to getting through code review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_2-小的改动列表-small-cls" class="sidebar-link">2. 小的改动列表 Small CLs</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#_3-处理review建议-how-to-handle-reviewer-comments" class="sidebar-link">3. 处理review建议 How to handle reviewer comments</a></li><li class="sidebar-sub-header"><a href="/Blog/coding/project_manage/google_code_review_guide.html#ref" class="sidebar-link">ref</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>谷歌代码评审指南学习</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>evoToBetter</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>谷歌代码评审指南学习</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>evoToBetter</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2020-06-23 09:18:11</span></i> <!----> <i class="iconfont reco-tag tags" data-v-34ea29db><span class="tag-item" data-v-34ea29db>project manage</span><span class="tag-item" data-v-34ea29db>knowledge</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p>谷歌代码评审指南翻译和介绍</p></div> <h1 id="谷歌代码评审指南-google-code-review-guide"><a href="#谷歌代码评审指南-google-code-review-guide" class="header-anchor">#</a> 谷歌代码评审指南 google code review guide</h1> <h2 id="代码评审人指南-code-reviewer-guide"><a href="#代码评审人指南-code-reviewer-guide" class="header-anchor">#</a> 代码评审人指南 code reviewer guide</h2> <h3 id="_1-代码评审的标准-the-standard-of-code-review"><a href="#_1-代码评审的标准-the-standard-of-code-review" class="header-anchor">#</a> 1. 代码评审的标准 The standard of code review</h3> <p>目的：代码的健康度在持续改善
为了达成这个目的需要作出很多的权衡。</p> <ul><li><p>若评审人让代码的合入变的非常困难，那么代码的改善将无从谈起。</p></li> <li><p>同时代码评审人需要保证代码质量不能降低。</p></li> <li><p>代码评审人对评审的代码有所有权和责任。</p> <p>代码评审中的需要遵守的原则为：<br>
评审人应认可所有能对代码库健康度有提高的提交，尽管他们可能还不够完美。（最低标准）<br>
要点：<br>
没有完美的代码只有更好的代码<br>
代码评审人需要保证的是持续改进，保证可维护性、可读性、易懂等方面的提高。<br>
当然代码评审人可以提出任意可以改进的点，使用&quot;Nit:&quot;。这样CL拥有人可以知道这个建议可以被忽略。</p> <h4 id="监控"><a href="#监控" class="header-anchor">#</a> 监控</h4> <p>代码评审也是让开发者学习语言、框架及设计准则的好机会，需要评审者给出相应的建议。</p> <h4 id="原则"><a href="#原则" class="header-anchor">#</a> 原则</h4> <ul><li>事实胜于雄辩，以技术和数据为准。</li> <li>代码风格必须统一</li> <li>软件设计从来不是纯风格问题和个人喜好问题。除非开发者可以证明多个方案没有区别，否则应以标准设计原则为准。</li> <li>若无其他规则适用，CL应与原有代码内容上保持一致。</li></ul> <h4 id="冲突解决"><a href="#冲突解决" class="header-anchor">#</a> 冲突解决</h4> <p>出现冲突时，首先需要尝试达到共识。包括在线和离线会议讨论等。<br>
若冲突无法解决，最好的办法是升级。</p></li></ul> <h3 id="_2-代码评审中需要关注的点-what-to-look-for-in-a-code-review"><a href="#_2-代码评审中需要关注的点-what-to-look-for-in-a-code-review" class="header-anchor">#</a> 2. 代码评审中需要关注的点 What to look for in a code review</h3> <h4 id="_1-设计"><a href="#_1-设计" class="header-anchor">#</a> 1. 设计</h4> <ul><li>CL各部分之间的互动是否合理</li> <li>CL是否该隶属于这个库</li> <li>CL是否能和系统中其他部分有机结合</li> <li>是否是个好时机来增加这个功能</li></ul> <h4 id="_2-功能"><a href="#_2-功能" class="header-anchor">#</a> 2. 功能</h4> <ul><li>CL是否很好的实现功能</li> <li>是否存在bug</li> <li>从用户的角度检查CL</li> <li>并发编程是否存在错误</li></ul> <h4 id="_3-复杂度"><a href="#_3-复杂度" class="header-anchor">#</a> 3. 复杂度</h4> <ul><li>是否难以理解</li> <li>是否难以改动而不引入bug</li> <li>一类特殊的复杂度为过度工程，过度通用或加入目前不需要的功能。专注于当前问题的解决。</li></ul> <h4 id="_4-测试"><a href="#_4-测试" class="header-anchor">#</a> 4. 测试</h4> <ul><li>单元测试，集成测试，端到端测试等</li> <li>由人来保证测试的正确性</li> <li>测试是否真的会在代码出问题的时候失败</li> <li>测试是否会出现误报</li> <li>每个测试是否有单独的断言</li> <li>测试是否相互独立</li> <li>测试也是代码的一部分，在测试也不能引入太多的复杂度</li></ul> <h4 id="_5-命名"><a href="#_5-命名" class="header-anchor">#</a> 5. 命名</h4> <p>命名是否够具体？命名是否足够长来表达意思而不导致阅读困难？</p> <h4 id="_6-注释"><a href="#_6-注释" class="header-anchor">#</a> 6. 注释</h4> <p>注释主要解释代码为什么存在和做了什么，主要是解释代码无法说明的信息或难以理解的信息。需要注意注释和文档的区别，它更注重对代码片段的解释。</p> <h4 id="_7-风格"><a href="#_7-风格" class="header-anchor">#</a> 7. 风格</h4> <p>不要以个人喜好，阻止代码合入。而是以&quot;nit:&quot;为前缀提出建议<br>
风格修改需要和功能修改分离</p> <h4 id="_8-文档"><a href="#_8-文档" class="header-anchor">#</a> 8. 文档</h4> <p>文档需要和代码同步</p> <h4 id="_9-每一行"><a href="#_9-每一行" class="header-anchor">#</a> 9. 每一行</h4> <p>对每一行代码都要仔细检查。<br>
代码审查人需要理解代码，以便其他人可以正确理解代码</p> <h4 id="_10-上下文"><a href="#_10-上下文" class="header-anchor">#</a> 10. 上下文</h4> <p>结合上下文来审查CL，严格保持系统的健康度</p> <h4 id="_11-亮点"><a href="#_11-亮点" class="header-anchor">#</a> 11. 亮点</h4> <p>对出现的亮点，也可以写comment来指出</p> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <p>在做代码审查的时候，你需要保证：</p> <ul><li>代码经过很好的设计</li> <li>功能良好</li> <li>UI改动没问题</li> <li>并发编程做的很好</li> <li>代码不过度复杂</li> <li>不过度开发，不提前开发</li> <li>代码有合适的UT</li> <li>测试设计很完善</li> <li>命名规范清晰</li> <li>注释清晰，解释为什么这么做而不是做了什么</li> <li>有很好的文档</li> <li>代码符合风格指南</li></ul> <h3 id="_3-浏览cl-navigating-a-cl-in-review"><a href="#_3-浏览cl-navigating-a-cl-in-review" class="header-anchor">#</a> 3. 浏览CL Navigating a CL in review</h3> <h4 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h4> <ul><li>改动是否合理，是否有好的描述</li> <li>先检查最重要的部分，检查是否经过良好的设计</li> <li>以一个合适的顺序阅读剩下的部分</li></ul> <h4 id="步骤1：全面了解改动-take-a-broad-view-of-the-change"><a href="#步骤1：全面了解改动-take-a-broad-view-of-the-change" class="header-anchor">#</a> 步骤1：全面了解改动 Take a broad view of the change</h4> <p>首先检查改动是否合理，最好在改动前拒绝不合理改动</p> <h4 id="步骤2：检查改动的主要部分-examine-the-main-parts-of-the-cl"><a href="#步骤2：检查改动的主要部分-examine-the-main-parts-of-the-cl" class="header-anchor">#</a> 步骤2：检查改动的主要部分 Examine the main parts of the CL</h4> <p>找到改动的主要部分，通常是改动最大的文件。若改动太大，最好建议将改动拆分。<br>
发现大问题时，请第一时间提出评论。</p> <h4 id="步骤3：以一个适当的顺序检查剩下部分-look-through-the-rest-of-the-cl-in-an-appropriate-sequence"><a href="#步骤3：以一个适当的顺序检查剩下部分-look-through-the-rest-of-the-cl-in-an-appropriate-sequence" class="header-anchor">#</a> 步骤3：以一个适当的顺序检查剩下部分 Look through the rest of the CL in an appropriate sequence</h4> <p>可以按列出顺序，也可以先查看测试。</p> <h3 id="_4-code-review的速度-speed-of-code-reviews"><a href="#_4-code-review的速度-speed-of-code-reviews" class="header-anchor">#</a> 4. code review的速度 Speed of Code Reviews</h3> <h4 id="为什么要快速做code-review-why-should-code-reviews-be-fast"><a href="#为什么要快速做code-review-why-should-code-reviews-be-fast" class="header-anchor">#</a> 为什么要快速做code review  Why Should Code Reviews Be Fast?</h4> <p>团队的速度重要性要大于个人的速度<br>
为什么速度很重要：</p> <ul><li>团队的速度可能会被某人的review延迟拖慢</li> <li>快速的review会让抱怨减少</li> <li>缓慢的review会阻止代码的清理、重构和提高。</li></ul> <h4 id="code-review-需要多快-how-fast-should-code-reviews-be"><a href="#code-review-需要多快-how-fast-should-code-reviews-be" class="header-anchor">#</a> code review 需要多快 How Fast Should Code Reviews Be?</h4> <p>如果没有重要任务，请第一时间做快速review
最多延迟一个工作日
一天中可能会进行多轮review</p> <h4 id="速度-vs-中断-speed-vs-interruption"><a href="#速度-vs-中断-speed-vs-interruption" class="header-anchor">#</a> 速度 vs 中断 Speed vs. Interruption</h4> <p>在工作中一个断点进行review，避免在集中精力工作时打断自己。</p> <h4 id="快速响应-fast-responses"><a href="#快速响应-fast-responses" class="header-anchor">#</a> 快速响应 Fast Responses</h4> <p>快速响应，哪怕是一个简单的建议，也非常有用。</p> <h4 id="跨时区review-cross-time-zone-reviews"><a href="#跨时区review-cross-time-zone-reviews" class="header-anchor">#</a> 跨时区review Cross-Time-Zone Reviews</h4> <p>确保在对方上线前完成review</p> <h4 id="个人接受-lgtm-with-comments"><a href="#个人接受-lgtm-with-comments" class="header-anchor">#</a> 个人接受 LGTM With Comments</h4> <p>即使有些遗留问题、建议，也请给出个人接受和批准的评价。<br>
最好在个人接受评价中带有响应的comment（评论），以避免歧义等问题。</p> <h4 id="大改动列表-large-cls"><a href="#大改动列表-large-cls" class="header-anchor">#</a> 大改动列表 Large CLs</h4> <p>大改动最好拆分成小的。可以快速浏览给出些设计上的评论，不要阻塞开发的任务。</p> <h4 id="code-review随时间推移的改进-code-review-improvements-over-time"><a href="#code-review随时间推移的改进-code-review-improvements-over-time" class="header-anchor">#</a> code review随时间推移的改进 Code Review Improvements Over Time</h4> <p>不要为了速度做出妥协，code review速度的提高需要时间。</p> <h4 id="紧急情况-emergencies"><a href="#紧急情况-emergencies" class="header-anchor">#</a> 紧急情况 Emergencies</h4> <p>需要自信甄别什么是紧急情况，要慎重对待。</p> <h3 id="_5-如何写code-review评论"><a href="#_5-如何写code-review评论" class="header-anchor">#</a> 5. 如何写code review评论</h3> <h4 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> 总结</h4> <ul><li>友善</li> <li>解释你的理由</li> <li>注意平衡明确指示和只指出问题</li> <li>鼓励开发者简化代码和增加注释</li></ul> <h4 id="礼貌-courtesy"><a href="#礼貌-courtesy" class="header-anchor">#</a> 礼貌 courtesy</h4> <p>对事不对人。</p> <h4 id="解释理由-explain-why"><a href="#解释理由-explain-why" class="header-anchor">#</a> 解释理由 Explain Why</h4> <p>多一点解释有助于理解</p> <h4 id="给予指导-giving-guidance"><a href="#给予指导-giving-guidance" class="header-anchor">#</a> 给予指导 Giving Guidance</h4> <p>一般来说，解决问题是developer的事，而不是reviewer的。<br>
你可以指出问题，让developer来选择解决方案。<br>
有时候直接的解决方案会更好，code review的最终目的是得到最好的改动。<br>
第二个目的是训练developer，减少review时间。</p> <h4 id="接受解释-accepting-explanations"><a href="#接受解释-accepting-explanations" class="header-anchor">#</a> 接受解释 Accepting Explanations</h4> <p>当你不理解的代码的时候，代码可能需要重构，使其更加清晰。但是当你不知道一些常识的时候，可以要求developer解释。</p> <h3 id="_6-处理code-review中的拒绝"><a href="#_6-处理code-review中的拒绝" class="header-anchor">#</a> 6. 处理code review中的拒绝</h3> <h4 id="谁是对的？-who-is-right"><a href="#谁是对的？-who-is-right" class="header-anchor">#</a> 谁是对的？ Who is right?</h4> <p>当评论、建议被拒绝的时候，可以先多考虑考虑他们是否正确。
如果developer正确，请告知其忽略这个问题。若reviewer正确，请向developer解释。<br>
代码健康度的提高在每次小的步骤里面。</p> <h4 id="开发者感到厌烦-upsetting-developers"><a href="#开发者感到厌烦-upsetting-developers" class="header-anchor">#</a> 开发者感到厌烦 Upsetting Developers</h4> <p>通常是review的语气而不是坚持在某一点上的改进会让developer感到厌烦。</p> <h4 id="稍后清理-cleaning-it-up-later"><a href="#稍后清理-cleaning-it-up-later" class="header-anchor">#</a> 稍后清理 Cleaning It Up Later</h4> <p>最好不要稍后清理，而是及时完成。因为developer有很多工作而把清理工作推后，导致代码健康退化。<br>
在紧急任务中，需要开一个ticket，然后在代码中增加TODO注释，记录ticket链接。</p> <h4 id="关于严格度的普遍抱怨-general-complaints-about-strictness"><a href="#关于严格度的普遍抱怨-general-complaints-about-strictness" class="header-anchor">#</a> 关于严格度的普遍抱怨 General Complaints About Strictness</h4> <p>如果你提高严格度，会带来抱怨。但是提高code review速度可以使抱怨慢慢消退。人们会看到严格带来的价值。</p> <h4 id="解决冲突-resolving-conflicts"><a href="#解决冲突-resolving-conflicts" class="header-anchor">#</a> 解决冲突 Resolving Conflicts</h4> <p>如果一直无法解决冲突，可以考虑升级。</p> <h2 id="改动作者指南-the-cl-author-s-guide-to-getting-through-code-review"><a href="#改动作者指南-the-cl-author-s-guide-to-getting-through-code-review" class="header-anchor">#</a> 改动作者指南 The CL author’s guide to getting through code review</h2> <h4 id="_1-写一份好的cl描述-writing-good-cl-descriptions"><a href="#_1-写一份好的cl描述-writing-good-cl-descriptions" class="header-anchor">#</a> 1. 写一份好的CL描述 Writing good CL descriptions</h4> <p>一份改动描述需要包含改动点和理由。它将长期存在在我们代码库中，并且被成千上万人读到。<br>
如果所有重要信息都在代码里而不是描述里，将比较难读懂。</p> <h4 id="第一行-first-line"><a href="#第一行-first-line" class="header-anchor">#</a> 第一行 First Line</h4> <ul><li>简单总结已经完成的内容</li> <li>一个像命令的完成句</li> <li>后接一个空行<br>
第一行是查看改动历史的人看到的第一行，需要能够描述做了什么改动。是一个完成的句子而不是祈使句。</li></ul> <h4 id="主体要充满信息-body-is-informative"><a href="#主体要充满信息-body-is-informative" class="header-anchor">#</a> 主体要充满信息 Body is Informative</h4> <ul><li>描述需要解决的问题</li> <li>为什么这样是最好的方法</li> <li>如果有其他捷径，需要提及</li> <li>背景知识：bug数量、性能测试结果、设计文档链接</li> <li>注意如果是内部链接，最好能提供一些背景描述</li> <li>最好能够为读者提供上下文</li></ul> <h4 id="坏的cl描述-bad-cl-descriptions"><a href="#坏的cl描述-bad-cl-descriptions" class="header-anchor">#</a> 坏的CL描述 Bad CL Descriptions</h4> <p>简短而通用的描述会让读者抓不住重点
比如： &quot;Fix build&quot;, &quot;Add patch&quot;, &quot;Phase 1&quot;</p> <h4 id="好的描述-good-cl-descriptions"><a href="#好的描述-good-cl-descriptions" class="header-anchor">#</a> 好的描述 Good CL Descriptions</h4> <h4 id="提交前重新审视-review-the-description-before-submitting-the-cl"><a href="#提交前重新审视-review-the-description-before-submitting-the-cl" class="header-anchor">#</a> 提交前重新审视 Review the description before submitting the CL</h4> <p>因为在提交前CL已经经过了多次改动，提交前需要检查描述是否还符合目前的改动。</p> <h3 id="_2-小的改动列表-small-cls"><a href="#_2-小的改动列表-small-cls" class="header-anchor">#</a> 2. 小的改动列表 Small CLs</h3> <h4 id="为什么要写小的cl-why-write-small-cls"><a href="#为什么要写小的cl-why-write-small-cls" class="header-anchor">#</a> 为什么要写小的CL Why Write Small CLs?</h4> <ul><li>review更方便</li> <li>review更彻底</li> <li>更不容易引入bug</li> <li>如果被拒绝会更不易浪费工作</li> <li>更容易合入</li> <li>更容易设计好</li> <li>review时可以让你并行处理其他部分，而不是阻塞在review</li> <li>更容易回滚</li></ul> <h4 id="如何称之为小-what-is-small"><a href="#如何称之为小-what-is-small" class="header-anchor">#</a> 如何称之为小 What is Small?</h4> <ul><li>只完成一件事</li> <li>所有reviewer需要理解的都包含在CL里</li> <li>CL check in之后系统可以正常工作</li> <li>CL不能太小，以至于不能理解他是如何工作的<br>
100行通常是ok的，1000行一般被认为是过大的。<br>
reviewer通常需要上下文来理解CL，对developer认为合适的可能对reviewer来说就是过大了。</li></ul> <h4 id="什么时候可以提交大cl-when-are-large-cls-okay"><a href="#什么时候可以提交大cl-when-are-large-cls-okay" class="header-anchor">#</a> 什么时候可以提交大CL When are Large CLs Okay?</h4> <ul><li>文件删除</li> <li>自动refactor</li> <li>带有测试</li></ul> <h5 id="以文件划分-splitting-by-files"><a href="#以文件划分-splitting-by-files" class="header-anchor">#</a> 以文件划分 Splitting by Files</h5> <p>以需要的reviewer不同来划分CL<br>
或以功能划分，比如配置和使用配置的代码可以分开</p> <h4 id="单独重构-separate-out-refactorings"><a href="#单独重构-separate-out-refactorings" class="header-anchor">#</a> 单独重构 Separate Out Refactorings</h4> <p>重构最好和功能性的CL分开提交，以免混乱和过大。</p> <h4 id="让相关代码在一个cl里-keep-related-test-code-in-the-same-cl"><a href="#让相关代码在一个cl里-keep-related-test-code-in-the-same-cl" class="header-anchor">#</a> 让相关代码在一个CL里 Keep related test code in the same CL</h4> <p>测试代码最好和其他代码在一个CL里<br>
例外情况：</p> <ul><li>测试已有代码</li> <li>重构已有测试</li> <li>增加新的测试框架</li></ul> <h4 id="不要让构建失败-don-t-break-the-build"><a href="#不要让构建失败-don-t-break-the-build" class="header-anchor">#</a> 不要让构建失败 Don’t Break the Build</h4> <p>CL应单独提交，而不会引起构建失败</p> <h4 id="不能让cl变的很小的情况-can-t-make-it-small-enough"><a href="#不能让cl变的很小的情况-can-t-make-it-small-enough" class="header-anchor">#</a> 不能让CL变的很小的情况 Can’t Make it Small Enough</h4> <p>和同时讨论，如何缩小CL<br>
实在不行的情况下，提前向reviewer说明情况。</p> <h3 id="_3-处理review建议-how-to-handle-reviewer-comments"><a href="#_3-处理review建议-how-to-handle-reviewer-comments" class="header-anchor">#</a> 3. 处理review建议 How to handle reviewer comments</h3> <h4 id="不要个人化看待-don-t-take-it-personally"><a href="#不要个人化看待-don-t-take-it-personally" class="header-anchor">#</a> 不要个人化看待 Don’t Take it Personally</h4> <p>不要在comments中表达愤怒的情绪</p> <h4 id="修正你的代码-fix-the-code"><a href="#修正你的代码-fix-the-code" class="header-anchor">#</a> 修正你的代码 Fix the Code</h4> <p>如果reviewer不理解你的代码，你需要考虑将代码重构的更加清晰，增加注释。<br>
如果注释还不能解释清楚，那么请在review tool上给予解释。<br>
最好还是在代码中解释清楚，这样有助于后来人理解。</p> <h4 id="独立思考-think-for-yourself"><a href="#独立思考-think-for-yourself" class="header-anchor">#</a> 独立思考 Think for Yourself</h4> <p>收到comments后，需要仔细思考，提出自己的见解。努力使自己和reviewer在技术层面达成一致。</p> <h4 id="解决冲突-resolving-conflicts-2"><a href="#解决冲突-resolving-conflicts-2" class="header-anchor">#</a> 解决冲突 Resolving Conflicts</h4> <p>尽量与reviewer达成共识<br>
若实在不行，可以考虑引入更多人讨论，或升级问题。<br>
不要让问题遗留。</p> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h3> <p><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener noreferrer">阮一峰---Commit message 和 Change log 编写指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">6/26/2020, 1:12:17 PM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/Blog/assets/js/app.06c93059.js" defer></script><script src="/Blog/assets/js/3.cf0bfed9.js" defer></script><script src="/Blog/assets/js/1.caa12b57.js" defer></script><script src="/Blog/assets/js/43.8f002953.js" defer></script>
  </body>
</html>
