(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{529:function(e,t,a){"use strict";a.r(t);var r=a(4),v=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[e._v("谷歌代码评审指南翻译和介绍")])]),e._v(" "),a("h1",{attrs:{id:"谷歌代码评审指南-google-code-review-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#谷歌代码评审指南-google-code-review-guide"}},[e._v("#")]),e._v(" 谷歌代码评审指南 google code review guide")]),e._v(" "),a("h2",{attrs:{id:"代码评审人指南-code-reviewer-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码评审人指南-code-reviewer-guide"}},[e._v("#")]),e._v(" 代码评审人指南 code reviewer guide")]),e._v(" "),a("h3",{attrs:{id:"_1-代码评审的标准-the-standard-of-code-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码评审的标准-the-standard-of-code-review"}},[e._v("#")]),e._v(" 1. 代码评审的标准 The standard of code review")]),e._v(" "),a("p",[e._v("目的：代码的健康度在持续改善\n为了达成这个目的需要作出很多的权衡。")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("若评审人让代码的合入变的非常困难，那么代码的改善将无从谈起。")])]),e._v(" "),a("li",[a("p",[e._v("同时代码评审人需要保证代码质量不能降低。")])]),e._v(" "),a("li",[a("p",[e._v("代码评审人对评审的代码有所有权和责任。")]),e._v(" "),a("p",[e._v("代码评审中的需要遵守的原则为："),a("br"),e._v("\n评审人应认可所有能对代码库健康度有提高的提交，尽管他们可能还不够完美。（最低标准）"),a("br"),e._v("\n要点："),a("br"),e._v("\n没有完美的代码只有更好的代码"),a("br"),e._v("\n代码评审人需要保证的是持续改进，保证可维护性、可读性、易懂等方面的提高。"),a("br"),e._v('\n当然代码评审人可以提出任意可以改进的点，使用"Nit:"。这样CL拥有人可以知道这个建议可以被忽略。')]),e._v(" "),a("h4",{attrs:{id:"监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监控"}},[e._v("#")]),e._v(" 监控")]),e._v(" "),a("p",[e._v("代码评审也是让开发者学习语言、框架及设计准则的好机会，需要评审者给出相应的建议。")]),e._v(" "),a("h4",{attrs:{id:"原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原则"}},[e._v("#")]),e._v(" 原则")]),e._v(" "),a("ul",[a("li",[e._v("事实胜于雄辩，以技术和数据为准。")]),e._v(" "),a("li",[e._v("代码风格必须统一")]),e._v(" "),a("li",[e._v("软件设计从来不是纯风格问题和个人喜好问题。除非开发者可以证明多个方案没有区别，否则应以标准设计原则为准。")]),e._v(" "),a("li",[e._v("若无其他规则适用，CL应与原有代码内容上保持一致。")])]),e._v(" "),a("h4",{attrs:{id:"冲突解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#冲突解决"}},[e._v("#")]),e._v(" 冲突解决")]),e._v(" "),a("p",[e._v("出现冲突时，首先需要尝试达到共识。包括在线和离线会议讨论等。"),a("br"),e._v("\n若冲突无法解决，最好的办法是升级。")])])]),e._v(" "),a("h3",{attrs:{id:"_2-代码评审中需要关注的点-what-to-look-for-in-a-code-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码评审中需要关注的点-what-to-look-for-in-a-code-review"}},[e._v("#")]),e._v(" 2. 代码评审中需要关注的点 What to look for in a code review")]),e._v(" "),a("h4",{attrs:{id:"_1-设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设计"}},[e._v("#")]),e._v(" 1. 设计")]),e._v(" "),a("ul",[a("li",[e._v("CL各部分之间的互动是否合理")]),e._v(" "),a("li",[e._v("CL是否该隶属于这个库")]),e._v(" "),a("li",[e._v("CL是否能和系统中其他部分有机结合")]),e._v(" "),a("li",[e._v("是否是个好时机来增加这个功能")])]),e._v(" "),a("h4",{attrs:{id:"_2-功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-功能"}},[e._v("#")]),e._v(" 2. 功能")]),e._v(" "),a("ul",[a("li",[e._v("CL是否很好的实现功能")]),e._v(" "),a("li",[e._v("是否存在bug")]),e._v(" "),a("li",[e._v("从用户的角度检查CL")]),e._v(" "),a("li",[e._v("并发编程是否存在错误")])]),e._v(" "),a("h4",{attrs:{id:"_3-复杂度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-复杂度"}},[e._v("#")]),e._v(" 3. 复杂度")]),e._v(" "),a("ul",[a("li",[e._v("是否难以理解")]),e._v(" "),a("li",[e._v("是否难以改动而不引入bug")]),e._v(" "),a("li",[e._v("一类特殊的复杂度为过度工程，过度通用或加入目前不需要的功能。专注于当前问题的解决。")])]),e._v(" "),a("h4",{attrs:{id:"_4-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-测试"}},[e._v("#")]),e._v(" 4. 测试")]),e._v(" "),a("ul",[a("li",[e._v("单元测试，集成测试，端到端测试等")]),e._v(" "),a("li",[e._v("由人来保证测试的正确性")]),e._v(" "),a("li",[e._v("测试是否真的会在代码出问题的时候失败")]),e._v(" "),a("li",[e._v("测试是否会出现误报")]),e._v(" "),a("li",[e._v("每个测试是否有单独的断言")]),e._v(" "),a("li",[e._v("测试是否相互独立")]),e._v(" "),a("li",[e._v("测试也是代码的一部分，在测试也不能引入太多的复杂度")])]),e._v(" "),a("h4",{attrs:{id:"_5-命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-命名"}},[e._v("#")]),e._v(" 5. 命名")]),e._v(" "),a("p",[e._v("命名是否够具体？命名是否足够长来表达意思而不导致阅读困难？")]),e._v(" "),a("h4",{attrs:{id:"_6-注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-注释"}},[e._v("#")]),e._v(" 6. 注释")]),e._v(" "),a("p",[e._v("注释主要解释代码为什么存在和做了什么，主要是解释代码无法说明的信息或难以理解的信息。需要注意注释和文档的区别，它更注重对代码片段的解释。")]),e._v(" "),a("h4",{attrs:{id:"_7-风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-风格"}},[e._v("#")]),e._v(" 7. 风格")]),e._v(" "),a("p",[e._v('不要以个人喜好，阻止代码合入。而是以"nit:"为前缀提出建议'),a("br"),e._v("\n风格修改需要和功能修改分离")]),e._v(" "),a("h4",{attrs:{id:"_8-文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-文档"}},[e._v("#")]),e._v(" 8. 文档")]),e._v(" "),a("p",[e._v("文档需要和代码同步")]),e._v(" "),a("h4",{attrs:{id:"_9-每一行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-每一行"}},[e._v("#")]),e._v(" 9. 每一行")]),e._v(" "),a("p",[e._v("对每一行代码都要仔细检查。"),a("br"),e._v("\n代码审查人需要理解代码，以便其他人可以正确理解代码")]),e._v(" "),a("h4",{attrs:{id:"_10-上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-上下文"}},[e._v("#")]),e._v(" 10. 上下文")]),e._v(" "),a("p",[e._v("结合上下文来审查CL，严格保持系统的健康度")]),e._v(" "),a("h4",{attrs:{id:"_11-亮点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-亮点"}},[e._v("#")]),e._v(" 11. 亮点")]),e._v(" "),a("p",[e._v("对出现的亮点，也可以写comment来指出")]),e._v(" "),a("h4",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("p",[e._v("在做代码审查的时候，你需要保证：")]),e._v(" "),a("ul",[a("li",[e._v("代码经过很好的设计")]),e._v(" "),a("li",[e._v("功能良好")]),e._v(" "),a("li",[e._v("UI改动没问题")]),e._v(" "),a("li",[e._v("并发编程做的很好")]),e._v(" "),a("li",[e._v("代码不过度复杂")]),e._v(" "),a("li",[e._v("不过度开发，不提前开发")]),e._v(" "),a("li",[e._v("代码有合适的UT")]),e._v(" "),a("li",[e._v("测试设计很完善")]),e._v(" "),a("li",[e._v("命名规范清晰")]),e._v(" "),a("li",[e._v("注释清晰，解释为什么这么做而不是做了什么")]),e._v(" "),a("li",[e._v("有很好的文档")]),e._v(" "),a("li",[e._v("代码符合风格指南")])]),e._v(" "),a("h3",{attrs:{id:"_3-浏览cl-navigating-a-cl-in-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-浏览cl-navigating-a-cl-in-review"}},[e._v("#")]),e._v(" 3. 浏览CL Navigating a CL in review")]),e._v(" "),a("h4",{attrs:{id:"总结-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-2"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("ul",[a("li",[e._v("改动是否合理，是否有好的描述")]),e._v(" "),a("li",[e._v("先检查最重要的部分，检查是否经过良好的设计")]),e._v(" "),a("li",[e._v("以一个合适的顺序阅读剩下的部分")])]),e._v(" "),a("h4",{attrs:{id:"步骤1：全面了解改动-take-a-broad-view-of-the-change"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤1：全面了解改动-take-a-broad-view-of-the-change"}},[e._v("#")]),e._v(" 步骤1：全面了解改动 Take a broad view of the change")]),e._v(" "),a("p",[e._v("首先检查改动是否合理，最好在改动前拒绝不合理改动")]),e._v(" "),a("h4",{attrs:{id:"步骤2：检查改动的主要部分-examine-the-main-parts-of-the-cl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤2：检查改动的主要部分-examine-the-main-parts-of-the-cl"}},[e._v("#")]),e._v(" 步骤2：检查改动的主要部分 Examine the main parts of the CL")]),e._v(" "),a("p",[e._v("找到改动的主要部分，通常是改动最大的文件。若改动太大，最好建议将改动拆分。"),a("br"),e._v("\n发现大问题时，请第一时间提出评论。")]),e._v(" "),a("h4",{attrs:{id:"步骤3：以一个适当的顺序检查剩下部分-look-through-the-rest-of-the-cl-in-an-appropriate-sequence"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤3：以一个适当的顺序检查剩下部分-look-through-the-rest-of-the-cl-in-an-appropriate-sequence"}},[e._v("#")]),e._v(" 步骤3：以一个适当的顺序检查剩下部分 Look through the rest of the CL in an appropriate sequence")]),e._v(" "),a("p",[e._v("可以按列出顺序，也可以先查看测试。")]),e._v(" "),a("h3",{attrs:{id:"_4-code-review的速度-speed-of-code-reviews"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-code-review的速度-speed-of-code-reviews"}},[e._v("#")]),e._v(" 4. code review的速度 Speed of Code Reviews")]),e._v(" "),a("h4",{attrs:{id:"为什么要快速做code-review-why-should-code-reviews-be-fast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要快速做code-review-why-should-code-reviews-be-fast"}},[e._v("#")]),e._v(" 为什么要快速做code review  Why Should Code Reviews Be Fast?")]),e._v(" "),a("p",[e._v("团队的速度重要性要大于个人的速度"),a("br"),e._v("\n为什么速度很重要：")]),e._v(" "),a("ul",[a("li",[e._v("团队的速度可能会被某人的review延迟拖慢")]),e._v(" "),a("li",[e._v("快速的review会让抱怨减少")]),e._v(" "),a("li",[e._v("缓慢的review会阻止代码的清理、重构和提高。")])]),e._v(" "),a("h4",{attrs:{id:"code-review-需要多快-how-fast-should-code-reviews-be"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-review-需要多快-how-fast-should-code-reviews-be"}},[e._v("#")]),e._v(" code review 需要多快 How Fast Should Code Reviews Be?")]),e._v(" "),a("p",[e._v("如果没有重要任务，请第一时间做快速review\n最多延迟一个工作日\n一天中可能会进行多轮review")]),e._v(" "),a("h4",{attrs:{id:"速度-vs-中断-speed-vs-interruption"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#速度-vs-中断-speed-vs-interruption"}},[e._v("#")]),e._v(" 速度 vs 中断 Speed vs. Interruption")]),e._v(" "),a("p",[e._v("在工作中一个断点进行review，避免在集中精力工作时打断自己。")]),e._v(" "),a("h4",{attrs:{id:"快速响应-fast-responses"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速响应-fast-responses"}},[e._v("#")]),e._v(" 快速响应 Fast Responses")]),e._v(" "),a("p",[e._v("快速响应，哪怕是一个简单的建议，也非常有用。")]),e._v(" "),a("h4",{attrs:{id:"跨时区review-cross-time-zone-reviews"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨时区review-cross-time-zone-reviews"}},[e._v("#")]),e._v(" 跨时区review Cross-Time-Zone Reviews")]),e._v(" "),a("p",[e._v("确保在对方上线前完成review")]),e._v(" "),a("h4",{attrs:{id:"个人接受-lgtm-with-comments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#个人接受-lgtm-with-comments"}},[e._v("#")]),e._v(" 个人接受 LGTM With Comments")]),e._v(" "),a("p",[e._v("即使有些遗留问题、建议，也请给出个人接受和批准的评价。"),a("br"),e._v("\n最好在个人接受评价中带有响应的comment（评论），以避免歧义等问题。")]),e._v(" "),a("h4",{attrs:{id:"大改动列表-large-cls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大改动列表-large-cls"}},[e._v("#")]),e._v(" 大改动列表 Large CLs")]),e._v(" "),a("p",[e._v("大改动最好拆分成小的。可以快速浏览给出些设计上的评论，不要阻塞开发的任务。")]),e._v(" "),a("h4",{attrs:{id:"code-review随时间推移的改进-code-review-improvements-over-time"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-review随时间推移的改进-code-review-improvements-over-time"}},[e._v("#")]),e._v(" code review随时间推移的改进 Code Review Improvements Over Time")]),e._v(" "),a("p",[e._v("不要为了速度做出妥协，code review速度的提高需要时间。")]),e._v(" "),a("h4",{attrs:{id:"紧急情况-emergencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#紧急情况-emergencies"}},[e._v("#")]),e._v(" 紧急情况 Emergencies")]),e._v(" "),a("p",[e._v("需要自信甄别什么是紧急情况，要慎重对待。")]),e._v(" "),a("h3",{attrs:{id:"_5-如何写code-review评论"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-如何写code-review评论"}},[e._v("#")]),e._v(" 5. 如何写code review评论")]),e._v(" "),a("h4",{attrs:{id:"总结-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-3"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("ul",[a("li",[e._v("友善")]),e._v(" "),a("li",[e._v("解释你的理由")]),e._v(" "),a("li",[e._v("注意平衡明确指示和只指出问题")]),e._v(" "),a("li",[e._v("鼓励开发者简化代码和增加注释")])]),e._v(" "),a("h4",{attrs:{id:"礼貌-courtesy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#礼貌-courtesy"}},[e._v("#")]),e._v(" 礼貌 courtesy")]),e._v(" "),a("p",[e._v("对事不对人。")]),e._v(" "),a("h4",{attrs:{id:"解释理由-explain-why"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解释理由-explain-why"}},[e._v("#")]),e._v(" 解释理由 Explain Why")]),e._v(" "),a("p",[e._v("多一点解释有助于理解")]),e._v(" "),a("h4",{attrs:{id:"给予指导-giving-guidance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#给予指导-giving-guidance"}},[e._v("#")]),e._v(" 给予指导 Giving Guidance")]),e._v(" "),a("p",[e._v("一般来说，解决问题是developer的事，而不是reviewer的。"),a("br"),e._v("\n你可以指出问题，让developer来选择解决方案。"),a("br"),e._v("\n有时候直接的解决方案会更好，code review的最终目的是得到最好的改动。"),a("br"),e._v("\n第二个目的是训练developer，减少review时间。")]),e._v(" "),a("h4",{attrs:{id:"接受解释-accepting-explanations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接受解释-accepting-explanations"}},[e._v("#")]),e._v(" 接受解释 Accepting Explanations")]),e._v(" "),a("p",[e._v("当你不理解的代码的时候，代码可能需要重构，使其更加清晰。但是当你不知道一些常识的时候，可以要求developer解释。")]),e._v(" "),a("h3",{attrs:{id:"_6-处理code-review中的拒绝"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-处理code-review中的拒绝"}},[e._v("#")]),e._v(" 6. 处理code review中的拒绝")]),e._v(" "),a("h4",{attrs:{id:"谁是对的？-who-is-right"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#谁是对的？-who-is-right"}},[e._v("#")]),e._v(" 谁是对的？ Who is right?")]),e._v(" "),a("p",[e._v("当评论、建议被拒绝的时候，可以先多考虑考虑他们是否正确。\n如果developer正确，请告知其忽略这个问题。若reviewer正确，请向developer解释。"),a("br"),e._v("\n代码健康度的提高在每次小的步骤里面。")]),e._v(" "),a("h4",{attrs:{id:"开发者感到厌烦-upsetting-developers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发者感到厌烦-upsetting-developers"}},[e._v("#")]),e._v(" 开发者感到厌烦 Upsetting Developers")]),e._v(" "),a("p",[e._v("通常是review的语气而不是坚持在某一点上的改进会让developer感到厌烦。")]),e._v(" "),a("h4",{attrs:{id:"稍后清理-cleaning-it-up-later"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#稍后清理-cleaning-it-up-later"}},[e._v("#")]),e._v(" 稍后清理 Cleaning It Up Later")]),e._v(" "),a("p",[e._v("最好不要稍后清理，而是及时完成。因为developer有很多工作而把清理工作推后，导致代码健康退化。"),a("br"),e._v("\n在紧急任务中，需要开一个ticket，然后在代码中增加TODO注释，记录ticket链接。")]),e._v(" "),a("h4",{attrs:{id:"关于严格度的普遍抱怨-general-complaints-about-strictness"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于严格度的普遍抱怨-general-complaints-about-strictness"}},[e._v("#")]),e._v(" 关于严格度的普遍抱怨 General Complaints About Strictness")]),e._v(" "),a("p",[e._v("如果你提高严格度，会带来抱怨。但是提高code review速度可以使抱怨慢慢消退。人们会看到严格带来的价值。")]),e._v(" "),a("h4",{attrs:{id:"解决冲突-resolving-conflicts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决冲突-resolving-conflicts"}},[e._v("#")]),e._v(" 解决冲突 Resolving Conflicts")]),e._v(" "),a("p",[e._v("如果一直无法解决冲突，可以考虑升级。")]),e._v(" "),a("h2",{attrs:{id:"改动作者指南-the-cl-author-s-guide-to-getting-through-code-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改动作者指南-the-cl-author-s-guide-to-getting-through-code-review"}},[e._v("#")]),e._v(" 改动作者指南 The CL author’s guide to getting through code review")]),e._v(" "),a("h4",{attrs:{id:"_1-写一份好的cl描述-writing-good-cl-descriptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-写一份好的cl描述-writing-good-cl-descriptions"}},[e._v("#")]),e._v(" 1. 写一份好的CL描述 Writing good CL descriptions")]),e._v(" "),a("p",[e._v("一份改动描述需要包含改动点和理由。它将长期存在在我们代码库中，并且被成千上万人读到。"),a("br"),e._v("\n如果所有重要信息都在代码里而不是描述里，将比较难读懂。")]),e._v(" "),a("h4",{attrs:{id:"第一行-first-line"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一行-first-line"}},[e._v("#")]),e._v(" 第一行 First Line")]),e._v(" "),a("ul",[a("li",[e._v("简单总结已经完成的内容")]),e._v(" "),a("li",[e._v("一个像命令的完成句")]),e._v(" "),a("li",[e._v("后接一个空行"),a("br"),e._v("\n第一行是查看改动历史的人看到的第一行，需要能够描述做了什么改动。是一个完成的句子而不是祈使句。")])]),e._v(" "),a("h4",{attrs:{id:"主体要充满信息-body-is-informative"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主体要充满信息-body-is-informative"}},[e._v("#")]),e._v(" 主体要充满信息 Body is Informative")]),e._v(" "),a("ul",[a("li",[e._v("描述需要解决的问题")]),e._v(" "),a("li",[e._v("为什么这样是最好的方法")]),e._v(" "),a("li",[e._v("如果有其他捷径，需要提及")]),e._v(" "),a("li",[e._v("背景知识：bug数量、性能测试结果、设计文档链接")]),e._v(" "),a("li",[e._v("注意如果是内部链接，最好能提供一些背景描述")]),e._v(" "),a("li",[e._v("最好能够为读者提供上下文")])]),e._v(" "),a("h4",{attrs:{id:"坏的cl描述-bad-cl-descriptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#坏的cl描述-bad-cl-descriptions"}},[e._v("#")]),e._v(" 坏的CL描述 Bad CL Descriptions")]),e._v(" "),a("p",[e._v('简短而通用的描述会让读者抓不住重点\n比如： "Fix build", "Add patch", "Phase 1"')]),e._v(" "),a("h4",{attrs:{id:"好的描述-good-cl-descriptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#好的描述-good-cl-descriptions"}},[e._v("#")]),e._v(" 好的描述 Good CL Descriptions")]),e._v(" "),a("h4",{attrs:{id:"提交前重新审视-review-the-description-before-submitting-the-cl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交前重新审视-review-the-description-before-submitting-the-cl"}},[e._v("#")]),e._v(" 提交前重新审视 Review the description before submitting the CL")]),e._v(" "),a("p",[e._v("因为在提交前CL已经经过了多次改动，提交前需要检查描述是否还符合目前的改动。")]),e._v(" "),a("h3",{attrs:{id:"_2-小的改动列表-small-cls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-小的改动列表-small-cls"}},[e._v("#")]),e._v(" 2. 小的改动列表 Small CLs")]),e._v(" "),a("h4",{attrs:{id:"为什么要写小的cl-why-write-small-cls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要写小的cl-why-write-small-cls"}},[e._v("#")]),e._v(" 为什么要写小的CL Why Write Small CLs?")]),e._v(" "),a("ul",[a("li",[e._v("review更方便")]),e._v(" "),a("li",[e._v("review更彻底")]),e._v(" "),a("li",[e._v("更不容易引入bug")]),e._v(" "),a("li",[e._v("如果被拒绝会更不易浪费工作")]),e._v(" "),a("li",[e._v("更容易合入")]),e._v(" "),a("li",[e._v("更容易设计好")]),e._v(" "),a("li",[e._v("review时可以让你并行处理其他部分，而不是阻塞在review")]),e._v(" "),a("li",[e._v("更容易回滚")])]),e._v(" "),a("h4",{attrs:{id:"如何称之为小-what-is-small"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何称之为小-what-is-small"}},[e._v("#")]),e._v(" 如何称之为小 What is Small?")]),e._v(" "),a("ul",[a("li",[e._v("只完成一件事")]),e._v(" "),a("li",[e._v("所有reviewer需要理解的都包含在CL里")]),e._v(" "),a("li",[e._v("CL check in之后系统可以正常工作")]),e._v(" "),a("li",[e._v("CL不能太小，以至于不能理解他是如何工作的"),a("br"),e._v("\n100行通常是ok的，1000行一般被认为是过大的。"),a("br"),e._v("\nreviewer通常需要上下文来理解CL，对developer认为合适的可能对reviewer来说就是过大了。")])]),e._v(" "),a("h4",{attrs:{id:"什么时候可以提交大cl-when-are-large-cls-okay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么时候可以提交大cl-when-are-large-cls-okay"}},[e._v("#")]),e._v(" 什么时候可以提交大CL When are Large CLs Okay?")]),e._v(" "),a("ul",[a("li",[e._v("文件删除")]),e._v(" "),a("li",[e._v("自动refactor")]),e._v(" "),a("li",[e._v("带有测试")])]),e._v(" "),a("h5",{attrs:{id:"以文件划分-splitting-by-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以文件划分-splitting-by-files"}},[e._v("#")]),e._v(" 以文件划分 Splitting by Files")]),e._v(" "),a("p",[e._v("以需要的reviewer不同来划分CL"),a("br"),e._v("\n或以功能划分，比如配置和使用配置的代码可以分开")]),e._v(" "),a("h4",{attrs:{id:"单独重构-separate-out-refactorings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单独重构-separate-out-refactorings"}},[e._v("#")]),e._v(" 单独重构 Separate Out Refactorings")]),e._v(" "),a("p",[e._v("重构最好和功能性的CL分开提交，以免混乱和过大。")]),e._v(" "),a("h4",{attrs:{id:"让相关代码在一个cl里-keep-related-test-code-in-the-same-cl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让相关代码在一个cl里-keep-related-test-code-in-the-same-cl"}},[e._v("#")]),e._v(" 让相关代码在一个CL里 Keep related test code in the same CL")]),e._v(" "),a("p",[e._v("测试代码最好和其他代码在一个CL里"),a("br"),e._v("\n例外情况：")]),e._v(" "),a("ul",[a("li",[e._v("测试已有代码")]),e._v(" "),a("li",[e._v("重构已有测试")]),e._v(" "),a("li",[e._v("增加新的测试框架")])]),e._v(" "),a("h4",{attrs:{id:"不要让构建失败-don-t-break-the-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不要让构建失败-don-t-break-the-build"}},[e._v("#")]),e._v(" 不要让构建失败 Don’t Break the Build")]),e._v(" "),a("p",[e._v("CL应单独提交，而不会引起构建失败")]),e._v(" "),a("h4",{attrs:{id:"不能让cl变的很小的情况-can-t-make-it-small-enough"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不能让cl变的很小的情况-can-t-make-it-small-enough"}},[e._v("#")]),e._v(" 不能让CL变的很小的情况 Can’t Make it Small Enough")]),e._v(" "),a("p",[e._v("和同时讨论，如何缩小CL"),a("br"),e._v("\n实在不行的情况下，提前向reviewer说明情况。")]),e._v(" "),a("h3",{attrs:{id:"_3-处理review建议-how-to-handle-reviewer-comments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-处理review建议-how-to-handle-reviewer-comments"}},[e._v("#")]),e._v(" 3. 处理review建议 How to handle reviewer comments")]),e._v(" "),a("h4",{attrs:{id:"不要个人化看待-don-t-take-it-personally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不要个人化看待-don-t-take-it-personally"}},[e._v("#")]),e._v(" 不要个人化看待 Don’t Take it Personally")]),e._v(" "),a("p",[e._v("不要在comments中表达愤怒的情绪")]),e._v(" "),a("h4",{attrs:{id:"修正你的代码-fix-the-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修正你的代码-fix-the-code"}},[e._v("#")]),e._v(" 修正你的代码 Fix the Code")]),e._v(" "),a("p",[e._v("如果reviewer不理解你的代码，你需要考虑将代码重构的更加清晰，增加注释。"),a("br"),e._v("\n如果注释还不能解释清楚，那么请在review tool上给予解释。"),a("br"),e._v("\n最好还是在代码中解释清楚，这样有助于后来人理解。")]),e._v(" "),a("h4",{attrs:{id:"独立思考-think-for-yourself"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#独立思考-think-for-yourself"}},[e._v("#")]),e._v(" 独立思考 Think for Yourself")]),e._v(" "),a("p",[e._v("收到comments后，需要仔细思考，提出自己的见解。努力使自己和reviewer在技术层面达成一致。")]),e._v(" "),a("h4",{attrs:{id:"解决冲突-resolving-conflicts-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决冲突-resolving-conflicts-2"}},[e._v("#")]),e._v(" 解决冲突 Resolving Conflicts")]),e._v(" "),a("p",[e._v("尽量与reviewer达成共识"),a("br"),e._v("\n若实在不行，可以考虑引入更多人讨论，或升级问题。"),a("br"),e._v("\n不要让问题遗留。")]),e._v(" "),a("h3",{attrs:{id:"ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref"}},[e._v("#")]),e._v(" ref")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("阮一峰---Commit message 和 Change log 编写指南"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=v.exports}}]);